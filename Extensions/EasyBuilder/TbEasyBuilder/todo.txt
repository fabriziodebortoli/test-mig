GLOSSARIO:
HasCodeBehind=true significa che il parsed control c++ wrappato NON E' STATO AGGIUNTO DA EASYBUILDER 
ma dal programmatore c++ (nostro o di un verticale)

26/10/2010: viene oggi definita la seguente distinzione.
Tramite EasyBuilder sarà possibile creare verticali e customizzazioni.
Un verticale è un insieme di oggetti che risiede nella parte standard dell'installazione.
Non conosce nulla di altri verticali (in modo da non dover gestire dipendenze) e non deve fare affidamento sull'ordine
di caricamento rispetto ad altri verticali.
Se sono su un'installazione di Mago e diversi verticali, e voglio entrare in modifica di un particolare verticale tra questi,
allora dovrò scaricare dalla memoria tutto e ricaricare solo Mago più il verticale in questione.
Una customizzazione, invece, è un insieme di oggetti che risiede nella parte custom dell'installazione.
Viene prodotta una sola DLL per ogni documento customizzato, indipendentemente da quante volte entro ed esco dalla sessione
di modifica salvando.
La customizzazione può personalizare tutto ciò che viene dalla standard (quindi Mago più eventuali verticali).
È necessario esprimere il fatto che la customizzazione dipende da un determinato verticale e si deve decidere il da farsi
nel caso in cui venga applicata a runtime una customizzazione in mancanza di un verticle da cui essa dipende: segnalarlo,
non caricarla e proseguire oppure proprio non eseguire il documento.
Vengono meno le necessità di evidenziare a design time a chi appartengono i controlli.
Restano da affrontare il problema della pacchettizzazione del verticale e della customizzazione e il problema
dell'attivazione del verticale.

24/01/2011 
- fare le icone dell'object model più grandi
- aggiungere un nodo sotto View dove poter mettere i controlli della master view in modo da poterne collassare il contenuto 
- mettere una toolbar sull'object model che contenga le opzioni di tasto dx del mouse (delete, properties, add new dbt)
- gestione della sovrascrittura in salvataggio di una customizzazione esistente
  sente il cambio di default
- gestione delle references ad altri assembly
- ESC non deve uscire in automatico dalla customizzazione
ok naming convention:   DM => MD,  fld_,    ctrl_,    col_,    tab_,    tabber_,    view_
ok Togliere l'expand automatico sui dbt
ok togliere dall'elenco delle properties della property grid i campi di database dal nodo del DBT
ok la "Add Data Table" rinominarla in "Add New DBT"
ok quando parte la finestra di new dbt, visualizzarla immediatamente senza aspettare la registrazione delle tabelle
   fare le seguenti modifiche alla finestra di Add New DBT:
ok  On table name => Choosa a table to associate
ok  il gruppo relation type deve essere visualzzato solo se slave mentre creando il master il gruppo deve scomparire
ok  la dicitura associata a Relation Type deve essere "Master Child Type" : one to one, one to many
ok  la gestione delle relazioni va mostrata come finesta finale sull'ok (veniva un po' una schifezza).
ok  non abilitare il tasto OK della combo box con selezione <none> 
ok  la rappresentazione della relazione deve avere una forma tipo orm
ok  togliere la listbox delle chiavi primarie e metterle in evidenza nella relazione (chiavetta)
ok  una view non può essere associata al master
ok aggiungere un euristica per nome all'associazione automatica delle foreing key in caso di slave
   le proprietà di DBT saranno:
ok  Is not to delete => Delete Owner = current/others
ok  IsOnaDatabaseView => Associate to a View
ok  Only for delete => Only Delete Action
ok  Read Behaviour: not delayed => Immediate, AllDalayed => Delayed
ok semplificare la grammatica di serializzazione delle FK di un DBTSlave  
ok aggiungere gli eventi di OnBeforeQuery, OnAfterQuery
ok La voce Add New DBT si deve abilitare solo quando seleziono il nodo document
ok Al posto di "Customization1" chiamare la nuvoa customizzazione "NewCustomization"
ok nelle proprietà dei dataobj di record il DataType non mostra nulla 
ok Nella property grid visualizzare l'oggetto selezionato
ok non devo poter cambiare il Value del dataobj
ok salvando una seconda customizzazione ed impostando che è la default, la tendina delle customizzazione non

- Dare la possibilità di modificare il tab order di controlli droppati su un documento. 

- Se la finestra non sta nella dimensione interna e compaiono le scollbar allora il rettangolo rosa
  di selezione sbordano leggermente e si disegna sul bordo della tab.

- Refresh anomali aprendo la tendina di selezione dei colori per cambiare per esempio il background color di un controllo sulla tab.

- Il refresh del rettangolo di selezione rosa su controlli delle tab non si refresh-a correttamente nei casi in cui,
  per esempio, si apra una finestra sopra di loro e poi la si richiuda.
  Il refresh di controlli seleizonati sulla testa invece avviene correttamente nei casi di finesre aperte e poi richiuse sopra di loro.
  Una finestra tipo per questo esempio è la finesta del codice sorgente per un evento.

- Risolvere problemi di offset della scrollbar

- gestione dei seguenti control: (wrapping o vedere se ri riescono a gestire e spostare solo le esistenti con la classe di wrapping generica)
	- bitmap, 
	- tree
	- barcode
	- gantt
	- treeview

- diagnostica derivante da malfunzionamenti derivanti dal basso livello c++. Oggi i puntatori vengono tutti testati e vengono
  ritornati degli assert, ma bisognerebbe trovare un modo per invalidare l'oggetto per evitare che "faccia finta di funzioanre"

- automatismo per associare eventi dataobj al controllo grafico che lo visualizza

- criteri di validazione del control (ad esempio: un equivalente del metodo IsValid() (possbili valori, ecc..)

- Verificare se mantenere la possibilità di intercettare il EN_VALUE_CHANGED del control o se toglierla

- possibilità di togliere le stringhe dal dizionario (rename di colonne già localizzate lasciano le stringhe vecchie)

- Multiselezione su form editor a design time?

- Non è possibile customizzare i pulsanti next, prev ecc nei wizard: l'algoritmo di riconoscimento dei controlli non addlink-ati
  non li trova anche se sono già disegnati, probabilmente perchè questi controlli sono tratati in maniera particolare da TB.

- Le view che sono floating (i cui frame non hanno parent) causano problemi entrando in design con EasyBuidler perchè il docking fallisce.

- Aggiunta di reference, using, immagini, cs/vb o dll personalizzati

- Bodyedit:
	- l'applicazione del visibile false all'intero be non funziona
	- resize non funziona
	- nel collection editor mettere anche testo della colonna oltre a nome altrimenti non si capisce
	- drag&drop dataobj di un buffered come gestione di un espressione di un campo che rappresenta la sua colonna (row index, totale automatico, local storage aggiunto al dbt?)
	- quando si è posizionati sul be e si fa tasto dx del mouse aggiungere Proprietà Colonne oltre a proprietà 
	- se si riesce ad ottenere colonna corrente:
	    - drag&drop nuova colonna dopo colonna corrente
		- evidenziarla nel bodyedit c++ cambiando magari colone di sfondo
		- spostamento colonne con frecce 
		- rimozione colonna da tasto dx del mouse
	- 
	- SetToBadCell cablata in sorgente per i DBT esistenti (in questo momento il programma da un po' di assert e si posiziona sulla pirma visibile)
	- colore sulla cella
	ok quando creo le colonne autoamticamente mettere visible=false le colonne di fk

- TabDialogs: 
	- spostamento in ordine delle tab (probabilmente necessario editing della collection di tab dialog)

- Proprietà di default dei controlli droppati uguali a quelle dei controlli già presenti sul documento.

- Wrapping della CXMLCombo (ha delle proprietà specifiche)
 
- Se la dll della customizzazione diventasse troppo grande, copiare sul client

- Pacchettizzatore delle customizzazioni

- Menu Editor
//------------------------------------------------------------------------------------------------
Ancora da analizzare (eventualmente da farsi in seconda battuta):

- Attualmente nel controller sono esposti i metodi di transazione primaria e secondaria, ma nessun oggetto
  consente al customizzatore di inserirsi nel processo. E' da valutarsi cosa fare:
   1) esporre degli oggetti che consentano di fare lock e update nella transazione secondaria (OnEditTransaction ecc..)
      e di fare lo start di una transazione secondaria extra  (StartTransaction, Update, Commit, Rollback)
   2) dirgli che lo possono fare con ADO.net, ma dobbiamo esporgli dei metodi che gli tornino almeno la stringa    
      di connesisone al database

- Attualmente per gli oggetti nuovi e/o rinominati non stiamo gestendo bene gli attributi di security 
  (verificare con Riccardo come svuotare e ricaricare bene le gerarchie dei m_OslInfo se necessario)

- Proprietà mandatory del campo, com maschera di inserimento dei dati (##.#) (con aggiunta di un marker per quelli errati)

- Verificare che la serializzazione del namespace funzioni dal framework 2 al 3.5 

- copia/incolla sulla proprietà databind.

- Gestione security

- wrapping delle SlaveView

- wrapping RowView: aggiunta, cancellazione, modifica di una esistente

- Gestione nuovo documento

- Gestione campi di database aggiunti dall'utente  (anche locali)

- Gestione nuovo oggetto di database: 
	- tabella 
	- views
	- store procedures
	- record locali

- Gestione DBT
	1) Modifica ed estensione delle query (posticipata)
	2) eventi di controllo (OnCheckPrimaryKey, OnCheckUserData ) posticipata
	6) Rigenerazione del DBTs x XTech (okkio che manca localizzazione del titolo. Va in CXMLDBTInfo ???)
	7) dbt su view (posticipata)
	9) Personalizzazione di un dbt esistente (posticipata)

- Gestione dell'Hotlink

- Gestione variabili locali di documento

- Utility per capire dove ci sono errori di compilazione.

- Gestione dei file della customizzazione a mò di project/solution di visual studio (report, menù ecc.)

- Gestione dei Wizard  (a differenza dei tabber non è possibile editare tab non visibili, anche volendo farlo in più sessioni, 
						in modifica della precedente customizzazione viene ricaricata la tab già modificata)



Changeset coinvolti nella problematica del code reentrancy:
il changeset 69973 ha introdotto il problema( fino al changeset 69967 non c'era)
il changeset 72413 ha tolto il problema (fino al changeset 72392 il problema c'era)
La cosa saliente del changeset 69973 è l'introduzione del CheckForIllegalCrossThreadOperations a TRUE.








Silvano: OSSERVAZIONI e ANOMALIE nate dal test

3-(Poca importanza e non lo ha nemmeno woorm) Manca Copia-Incolla degli oggetti
4-Il tooltip sul namespace (finestra proprieta') non compare se e' selezionato il "Name" o il "Text" (sempre nella finestra proprieta')

9-La splash per un attimo in avvio si sposta a destra invece di essere centrata


11- Rettangolo rosa selezione oggetti: se seleziono una tabdialog e faccio scroll oriz con mouse, non viene rinfrescato (viene disegnato ripetuto senza cancellare il precedente)

13- Editor grafico: se ho un controllo che ne copre altri (es. un bodyedit), clicco per selezionarlo, ma sono nell'area di un oggetto che sta sotto (z-order piu basso), seleziono quest'ultimo che non e' visibile).

19- Nell'editor di codice l'intellisense mi fa vedere solo gli oggetti che ho modificato/aggiunto, non tutti quelli presenti nella View 

24a- nel body edit funzionano eventi di mousedown, rowchanged, ma non il sizeChanged

26 - Consiglio: mettere messaggio di compilazione ok su tasto build dell'editor di codice

28- Suggerimento: La groupbox da editor grafico si porta dietro i controlli che hanno il punto top-left contenuto in essa, forse sarebbe piu comodo si portasse quelli interamente contenuti
  
29- Inserisco un tabber in un documento in basso, in modo che sfori sotto, clicco fuori il tabber lo riseleziono e si sposta in su da solo per far si che sia visualizzato tutto (Magari e' voluto..non so)  
 
31- Non posso trascinare i controlli sopra il bodyedit, ma se li trascino prima sulla view, e dopo sul bodyedit, allora mi e' concesso

32- Controllo ListView: inserisco nella collections degli itemSource delle stringhe ma non vengono visualizzate

40- Non riesco a mettere due gruppi di radio button distinti in un documento, anche se li metto in 2 groupbox separate

44- Una tab disabilitata (x rossa sulla linguetta) non e' selezionabile e quindi non modificabile da EasyBuilder

46 - EB Packager: i path vengono salvati nel file customList con percorso assoluto e non relativo, esportando e importando un ebp quindi nel file system di destinazione
 viene ricostruita una gerarchia errata

47 - EB Packager: non e' concesso utilizzare spazi nel path del file .ebp in fase di esportazione

              
Anomalie Corrette o Esaminate
------------------------------
1-(Bru: Eliminata) Nella toolbox degli oggetti grafici, la prima voce <pointer> mi sembra inutile (dopo aver trascinato un altro controllo il cursore ritorna in automatico su pointer)

5- (Bru: è una conseguenza del fatto che solo la tab attiva è stata istanziata. Le altre tab si popoleranno all'attivazione e da quel momento in poi avranno i componenti necessari a visualizzari il +.
         a meno di non metterci un nodo falso o di inizializzare tutte le tab non la vedo risolvibile)
  Nella finestra "Document Objects" di un documento con piu tab, il simbolo della tab nell'albero viene disegnato senza il simbolo + di espandi nodo anche se ha figli. Selezionando la tab nell'albero viene poi disegnato correttamente


10- Il nome dei controlli ha un prefisso standard, che pero non viene visualizzato nella finestra Proprieta campo Nome.
    (Bru: nel nome non deve essere visualizzato, ma adesso la propertygrid mostra il nome del control serializzato in un box in alto)

12- Aggiunta di un nuovo body edit, se si edita ColumsCollection prima di fare il Databinding, viene dato un messaggio con call stack tbbodyedit.cpp line 792 
    (Bru: è voluto, in debug viene lanciata un eccezione, mentre il release deve apparirti una messagebox)

14- Non e' possibile trascinare un TabControl all'interno di una tabDialog (Bru: TB non lo gestisce proprio)

18- (Bru: corretta, adesso viene data eloggata un eccezione che il controllo esiste già) 
   Nella customizzazione uno aggiungo in una tab l'edit con nome MyEdit e salvo. In una seconda customizzazione aggiungo nella stessa tab un controllo con nome nuovamente MyEdit. Mi e' permesso di salvare senza errori ma nel documento ho 2 oggetti 
   con lo stesso namespace in esecuzione.

   24 (risolto da Matteo) - non serializza evento sizeChanged, mousedown e forse tutti gli altri della view (pero si vedono nella scheda outline methods, non va perso il codice)


27- (Bru: corretta) la propertygrid mostra il nome del control serializzato in un box in alto, sarebbe bello un tooltip nel caso di nomi lunghi che non sono completamente visualizzati


30- (Bru: esposto l'evento Activated sulla tab dopo che sono stati creati i control) 
    Sul Tabber non e' wrappato l'evento tabchanged

31- Bru: Esposto DataLoaded su tutte le container come propoagazione della OnPrepareAuxData

34- Domande per BRUNA:	
	- mi scatta solo evento querying e non queried nel dbt, e' corretto o devono viaggiare in coppia? 
	  (Bru: devono viaggiare in coppia. Il Queried scatta dopo la FindData del DBT prima dei DataLoaded. Ho provato e in debug mi scatta, se non ti scatta mettimelo di nuovo da risolvere)
	- evento onBeforeEditTransaction quando dovrebbe scattare? 
	   (Bru	: deve scattare durante la transazione di edit)
	
37- (Bruna:corretta) CRASH: object null in SaveCustomization.InitializeButtons()
						
39- (DUBBIO SU MEMORY LEAKS) Aprendo e chiudendo easybuilder, sembra che la memoria cresca senza essere rilasciata, dopo un po mi ha dato eccezione outMemoryException
	aprendo invece un documento personalizzato con una customizzazione e richiudendolo piu volte sembra rilasciare correttamente la memoria
	[RISOLTO con flush della memoria - stesso problema di menumanager]

43-  [OK, risolto da Marco]se in una customizzazione associo un evento a un controllo, questo controllo viene serializzato e quindi posso usarlo nel codice e compilare. ma se nel codice di questo evento uso un
altro controllo che non era stato modificato, ho errore in compilazione, perche quest'ultimo non e' serializzato

45-  [OK, risolto da Bruna e Matteo]: L'evento sizechanged(anche mousedown e forse anche tutti gli altri) della view non viene eseguito  (info aggiuntiva: vedo il codice che gli ho associato dalla sezione "Methods outline", ma non vedo il metodo associato all'evento nelal finestra delle proprieta)


46- (Bru: è un comportamento voluto, ma non so di preciso perchè, magari ne parliamo insieme anche con gli altri) 
    La proprieta visible dei controlli funziona, ma viene applicata al salvataggio, mentre ad esempio il colore di sfondo viene applicato "a caldo",non so se e' voluto.. 

48a -(Bru: è voluto. Poichè banks è la chiave di relazione con il master, viene valorizzata in automatico dalle logiche di OnPreparePrimaryKey
     automatica di EasyBuilder. Normalmente nel gestionale non verrebbe nemmeno aggiunta nel bodyedit, ho pensato di aggiungerla ma
	 metterle il visible a false, in modo che se poi uno vuole visualizarla può farlo solo cambiandole il visible. Il comportamento
	 lo possiamo modificare se pensi che ce ne possa essere uno più comodo o intuitivo)
	 Drag&Drop colonne body edit: Inserisco in un nuovo doc DbtMaster Banks e DBTSlave BanksFactoringCustomer, e trascino i dataobj di quest'ultimo sul BE:
	 in filed "Bank" viene aggiunto nella comlumnscollection, ma non disegnato a video

48b-(Bru: corretta) Drag&Drop colonne body edit: Inserisco in un nuovo doc DbtMaster Banks e DBTSlave BanksFactoringCustomer, e trascino i dataobj di quest'ultimo sul BE:
in filed "Bank" viene aggiunto nella comlumnscollection, ma non disegnato a video, mentre TBModified e TbCreated non vengono aggiunti ne a video ne nella column collections



//////////////////////////////////////JSONEDITOR/////////////////////////////////////////////////

MARCO:
V usare le variabili locali di documento come dataSource
V Promozione da GeneralControl a ParsedControl
V ApplyChanged si schianta 
V Check-in Check-out dei file
V Gestione unico file Json (ricordare che le risorse condivise usano references)
V hotlink: dichiarazione attraverso namespace e non nome



ROBY:
V	evidenziare oggetto nel code editor 
V	menù contestuale AddItem, aggiungere tipo Folder, con controllo (solo se non esiste già, non permetto nesting di cartelle)
V	preselezionare panel nella combo, combo non editabile
V	askModified quando chiudo la dialog, AskClosingMenu
V	abilitare delete sulle cartelle, mettere controllo se è vuota. nè add nè delete abilitate al momento su cartelle
V	refresh albero dopo aggiunta item
V	proprietà non estese su riapertura di doc dove avevo aggiunto un genericCombo o genericButton
V	TollBox scrollbar auto

V abilitare selection nel code editor anche su click di un elemento già selezionato o sul movimento
V chiudi mago con form modificata ancora da salvare, compare due volte la finestra Unsaved changed
V name convention per i nuovi MParsedControl? differenziare gli static con IDC_STATIC_ nella textbox
V dataSource: ordinare le finestre di datasource, filtrati per documento
V genericListBox non ha un contorno, diventa introvabile



////////////////////////////////////// JSONEDITOR/ (priorità bassa) ////////////////////////////////////////////////

MARCO (priorità bassa) :
- assert wincore.cpp line:3351
- problema attivazione italia/brasile

ROBY:
- apro dialog, non tolgo il focus da lì, chiudo la dialog ma il nodo non si deseleziona
- multiselection, drag&drop
- tooltip delle form è dietro la finestra di Mago



DA ELSA: 

V       Deve sempre lavorare in lingua inglese (altrimenti salva le stringhe tradotte nel json)
V       Dalla finestra properties non si riesce a editare correttamente il tag Location (non capisce quello che si scrive tira via tutto)
V       Deve visualizzare i checkbox con lo stesso font degli altri control (ora le stringhe sono + piccole)
V       Deve chiamare il nuovo control IDC_
V       modificando sorgente e facendo Apply mi ha cambiato i check in radio (type era 11 è diventato 3) e sono scomparsi anche:
V         "auto": true,
V         "labelOnLeft": true (vedi file allegati su finestra Jobs del modulo Jobs)
V      
V       Faccio un nuovo checkbox generico, non mi tiene la caption a sx, non mi applica font rimane piccolo a dx e non va nel taborder perché ha "tabStop" : false, salvando scompaiono alcune opzioni dalle properties
V       Controllare facendo radio generico sicuramente mette anche lì tabsop a false
V       Check o Radio (generic o meno) DEVONO essere alti 10, gli altri control 12 (come faceva editor rc)
V       Nei control generici prendo un generic combobox non mi fa la tendina
V       Non funzionano frecce per spostare campi

V		 generic combo, non mi sembra funzioni limpostazione del ComboType da iterattivo
V		 generic combobox deve essere altezza 12 non 13
V		 Non cè modo di copiare i campi in iterattivo
V		 Non cè modo di centrare i campi in verticale (in editor rc usavamo CTRL F9)
V		 Non è integrato per checkin checkout
V		
V			Le operazioni di cut-copy paste-undo da designer sono di aiuto per il porting
V			Il panel su cui si lavora non si deve spostare
V			Make Same Size: viene assegnata la dimensione del primo control selezionato diversamente da come eravamo abituati con il tool integrato in visual studio in cui viene assegnata la dimensione dellultimo control selezionato
V			Le frecce della tastiera per modificare la Location non funzionano alla prima ma funzionano alla seconda. Se non lo verificate provate, prima di usare le frecce, a variare la dimensione del control
V			Dopo aver usato le frecce per spostare il control, se eseguo il ridimensionamento varia la Location
V			Nella multiselezione dei control:
			o	se clicchi sul panel (IDD) inserisce anche lui tra gli oggetti selezionati
			o	non si vede la location del control su cui potrebbe essere effettuato lallineamento
