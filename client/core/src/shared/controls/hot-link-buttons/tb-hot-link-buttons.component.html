<ng-template #optionsTemplate>
    <div class="searchOptions" [ngStyle]="optionsPopupStyle">
        <strong>Search for</strong>:
        <br>
        
        <div *ngFor="let item of selectionTypes" style="display: flex; width: auto" [ngClass]="{'elemSelected': item===selectionType, 'selTypeElem':true}" (click)="selectionTypeChanged(item);toggleTableForOptions(tableTemplate);">
            <div class="grid-container">
                <div class="grid-item">
                    <span *ngIf="item===selectionType" class="k-icon k-i-check" style="margin-right: 5px"></span>
                </div>
                <div class="grid-item">{{item}}</div>    
            </div>
        </div>
    </div>
</ng-template>
<ng-template #tableTemplate>
    <kendo-grid class="gridBody"
        [height]="300"
        [data]="gridView$ | async"
        [pageSize]="pageSize"
        [selectable]="true"
        [skip]="paginator.skip"
        [filterable]="true"
        [filter]="filter"
        (filterChange)="onFilterChange($event)" 
        (pageChange)="pageChange($event)" 
        (selectionChange)="selectionChanged($event)" 
        [pageable]="{
            buttonCount: 0,
            info: false,
            pageSizes: pageSizes,
            previousNext: previousNext
        }" 
        [ngStyle]="gridStyle$ | async">
        <kendo-grid-column 
                        *ngFor="let col of columns" field="{{col.id}}" title="{{col.id | uppercase}}" 
                        [width]="202"
                        id="{{cmpId + col.id}}"
                        [headerClass]="{'tableHeader':true}">
        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
            <div class="hotLinkGridCell"> {{dataItem[col.id] | tbEnums: col.type | async}} </div>
        </ng-template>
        </kendo-grid-column>
    </kendo-grid>
</ng-template>
<div *ngIf="!isAttachedToAComboBox" class="hotlinkButtonsContainer" #hotLinkButtons>
    <button #anchorOptions kendoButton (click)="toggleOptions(anchorOptions, optionsTemplate)" [icon]="'more-vertical'" [disabled]="!(slice$ | async)?.enabled"></button>
    <button #anchorTable kendoButton (click)="toggleTable(anchorTable, tableTemplate)" [icon]="'search'" [disabled]="!(slice$ | async)?.enabled"></button>
</div>
<div *ngIf="isAttachedToAComboBox" class="hotlinkDropDownContainer" #hotLinkDropDown>
    <kendo-combobox [data]="gridView$ | async | asDropDownData"
                    [allowCustom]="true"
                    [popupSettings]="{ width: 'auto' }"
                    [value]="slice$ | async | asDropDownValue"
                    [textField]="'id'"
                    [valueField]="'id'"
                    (open)="openDropDown()"
                    (close)="closeDropDown()"
                    [style.width.px]="width"
                    [filterable]="true"
                    (filterChange)="onComboFilterChange($event)"
                    (selectionChange)="comboSelectionChanged($event)"
                    [disabled]="!(slice$ | async)?.enabled">
        <ng-template kendoDropDownListItemTemplate let-dataItem>
            <div class="dropDownItem dropDownItemId">{{ dataItem.id }}</div>
            <div class="dropDownItem dropDownItemDescription">{{ dataItem.displayString }}</div>
        </ng-template>
        <ng-template kendoComboBoxFooterTemplate>
            <div *ngIf="!(this.paginator.isFirstPage && this.paginator.noMorePages)" [style.width.px]="width" 
                 [style.display]="'flex'" 
                 [style.background]="'white'"
                 [style.border-top-style]="'solid'"
                 [style.border-top-width.px]="1"
                 [style.border-top-color]="'#E9E9E9'">
                <button kendoButton (click)="firstDefaultPage()" [icon]="'arrow-end-left'"
                    [disabled]="paginator.isFirstPage"
                    style="flex: 1;"></button>
                <button kendoButton (click)="prevDefaultPage()" [icon]="'arrow-60-left'"
                    [disabled]="paginator.isFirstPage"
                    style="flex: 1;"></button>
                <button kendoButton (click)="nextDefaultPage()" [icon]="'arrow-60-right'"
                    [disabled]="paginator.noMorePages"
                    style="flex: 2;"></button>
            </div>
        </ng-template>
    </kendo-combobox>
</div>