<kendo-dialog title="Report Snapshots" (close)="close()">
    <div *ngIf="rsExportService.snapshots?.length > 0">
        <h3>Existing snapshots</h3>
        <hr>
        <table id="myTable">
            <tr>
                <th></th>
                <th (click)="sortTable(0)">Name</th>
                <th (click)="sortTable(1)">Date</th>
                <th></th>
            </tr>
            <tr *ngFor="let snap of this.rsExportService.snapshots; let i=index">
                <td class="align">
                    <button class="link" (click)="runSnapshot(snap.name, snap.date, snap.allUsers)">
                        <m4-icon icon="tb-report"></m4-icon>
                    </button>
                </td>
                <td>{{snap.name}}</td>
                <td>{{snap.date | date:"dd/MM/yyyy HH:mm:ss"}}</td>
                <td class="align">
                    <button class="link" (click)="deleteSnapshot(snap.name, snap.date, snap.allUsers)">
                        <m4-icon icon="tb-delete"></m4-icon>
                    </button>
                </td>
            </tr>
        </table>
        <br>
    </div>
    <br>
    <div class="collapse">
        <h3>Create new snapshot</h3>
        <button class="link" (click)="openCollapse()">
            <m4-icon *ngIf="!this.opened" icon="tb-down"></m4-icon>
            <m4-icon *ngIf="this.opened" icon="tb-up"></m4-icon>
        </button>
    </div>
    <hr>
    <div [ngClass]="{hide: !opened}">
        <kendo-textbox-container>
            <div class="inputName">
                <label>Name </label>
                <input kendoTextBox maxlength="40" [(ngModel)]="nameSnapshot" required="required" />
            </div>
        </kendo-textbox-container>
        <br>
        <br>
        <h3>Save for</h3>

        <mat-radio-button checked="checked" (click)="setSingleUser()">This user</mat-radio-button>
        <br>
        <mat-radio-button (click)="setAllusers()">All Users</mat-radio-button>
    </div>
    <kendo-dialog-actions>
        <button kendoButton *ngIf="rsExportService.snapshot && !this.opened" (click)="close()">Close</button>
        <button kendoButton [disabled]="nameSnapshot==''" *ngIf="rsExportService.snapshot && this.opened" (click)="createFileJson()">Save</button>
    </kendo-dialog-actions>
</kendo-dialog>