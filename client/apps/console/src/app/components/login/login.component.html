<!-- #begin dialogs -->
<admin-dialog [mode]="'fields'" [title]="'Change password'" [message]="'Please change password'" [(fields)]=changePasswordFields [(opened)]=openChangePasswordDialog [(result)]=changePasswordResult (onClose)="onCloseChangePasswordDialog($event)"></admin-dialog>
<admin-dialog [mode]="'message'" [title]="'Import'" [message]="msgDialog" [(opened)]=openMsgDialog [(result)]=dialogResult></admin-dialog>
<!-- #end dialogs -->
<div class="container pad10">
    <div class="row center-xs">
        <div class="col-xs-12" class="loginBox">
            <div class="row between-xs login-head">
                <div class="box">
                    <img src="assets/provisioning-tools.png" />
                </div>
                <div class="text-right login-instance-info">
                    <h5>{{ selectedInstanceKey }}</h5>
                    <br>
                    <a (click)="clearSelectedInstance()">
                        <h5 *ngIf="selectedInstanceKey != ''" class="pointer">
                            (change)
                        </h5>
                    </a>
                </div>
            </div>
            <div class="row start-xs login-welcome">
                <h3>{{ welcomeMessage }}</h3>
            </div>
            <div class="login-container">
                <div *ngIf="loginStep == 1">
                    <admin-input-text (keydown)="onKeyDown($event)" [material]=true [inputLabel]="'AccountName'" [(inputData)]="credentials.accountName"></admin-input-text>
                </div>
                <div *ngIf="loginStep == 1" class="login-forgot-box">
                    <a (click)="doForgottenPassword()" class="hint-label">Forgot your password?</a>
                </div>
                <div *ngIf="loginStep == 2">
                    <div *ngIf="instancesList.length > 0" class="pt10">
                        <select (keydown)="onKeyDown($event)" autofocus [(ngModel)]="selectedInstanceKey" class="login-select">
              <option value="" disabled selected hidden>Select an Instance</option>
              <option *ngFor="let instance of instancesList" value="{{ instance.InstanceKey }}">
                {{ instance.Description }}
              </option>
            </select>
                    </div>
                </div>
                <div *ngIf="loginStep == 3">
                    <admin-input-text (keydown)="onKeyDown($event)" [material]=true [inputLabel]="'Password'" [textType]="'password'" [(inputData)]="credentials.password" [readOnly]="appBusy"></admin-input-text>
                </div>
                <div class="alertLabel" *ngIf="errorMessage !== ''">
                    {{ errorMessage }}
                </div>
            </div>
            <div *ngIf="loginStep <= 3" class="end-xs mt40">
                <img *ngIf="appBusy" src="assets/ajax-loader.gif" class="login-spinner" />
                <admin-button *ngIf="!appBusy" (click)="doNext()" [buttonText]="'Next'" [primary]="true" [readOnly]="inputExists() || appBusy"></admin-button>
            </div>
        </div>
    </div>
</div>