#pragma once

//includere alla fine degli include del .H
#include "beginh.dex"
//=============================================================================
class TB_EXPORT CMiniHtmlDraw 
{
protected:

struct MiniHtml_CHAR_ENTITIES
{
	TCHAR *	pszName;		// string entered in HTML - e.g., "&nbsp;"
	TCHAR	cCode;			// code generated by XHTMLStatic
	TCHAR	cSymbol;		// character symbol displayed
};

public:

	CMiniHtmlDraw();
	virtual ~CMiniHtmlDraw();

	void ResetAll();			// formerly called Init()
	void Reset();

	void SetMargins(int nLeftMargin, int nRightMargin)
	{
		m_nLeftMargin = nLeftMargin;
		m_nRightMargin = nRightMargin;
	}

	void	Draw(HDC hdc, CStatic*, COLORREF crText, COLORREF crBackground);

private:
	int				FormatText		(HDC hdc, LPCTSTR lpszText, RECT * pRect, int nInitialXOffset);
	TCHAR			GetCharEntity	(TCHAR cCode);
	CString			GetNextWord		(TCHAR **ppText, BOOL *pbReturnSeen);
	void			InitCharEntities();
	BOOL			IsBlank			(LPCTSTR lpszText);

	BOOL			m_bUnderline;
	BOOL			m_bBold;
	BOOL			m_bItalic;
	BOOL			m_bCenter;
	BOOL			m_bStrikeThrough;
	BOOL			m_bSubscript;
	BOOL			m_bSuperscript;
	BOOL			m_bHorizontalRule;
	BOOL			m_bGeneratedText;
	int				m_nHorizontalRuleSize;
	int				m_nLeftMargin, m_nRightMargin;
	int				m_yStart;

	//BOOL			m_bRefresh;

	static MiniHtml_CHAR_ENTITIES	m_aCharEntities[];
};
//=============================================================================
#include "endh.dex"
