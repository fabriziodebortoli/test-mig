@(IfIsPrimaryKeyToModify{@(ApplyToPreviousTableVersion{@(+)
ALTER TABLE "@@(TableName)"\n@(+)
\tDROP CONSTRAINT "@@(TablePrimaryKeyConstraintName)"\n@(+)
GO\n\n@(+)
})})@(+)
@(IfAreForeignKeysToDrop{@(RepeatOnForeignKeysToDrop{@(+)
ALTER TABLE "@@(TableName)"\n@(+)
\tDROP CONSTRAINT "@@(ConstraintName)"\n@(+)
GO\n\n@(+)
})})@(+)
@(IfAreColumnsToAdd{@(+)
ALTER TABLE "@@(TableName)"\n@(+)
\tADD\n@(+)
@(RepeatOnAddedColumns{\t\t"@@(ColumnName)" @(ColumnDBFullDataType)@(IfIsPrimaryKeySegment{ @(ColumnDBNullableAttribute)})@(IfIsNotPrimaryKeySegment(@(IfHasDefaultValue{ DEFAULT(@(ColumnDBDefaultValue))}))), ",\r\n"})\n@(+)
GO\n\n})@(+)
@(IfAreColumnsToAlter{@(+)
@(RepeatOnAlteredColumns{ALTER TABLE "@@(TableName)"\n\tALTER COLUMN\n\t\t"@@(ColumnName)" @(ColumnDBFullDataType)@(IfIsPrimaryKeySegment{ @(ColumnDBNullableAttribute)})@(IfIsNotPrimaryKeySegment(@(IfHasDefaultValue{ DEFAULT(@(ColumnDBDefaultValue))}))), "\r\n"})\n@(+)
@(RepeatOnDefaultChangedColumns{@(IfIsNotPrimaryKeySegment(@(IfHasDefaultValue{\nUPDATE "@@(TableName)" SET "@@(TableName)"."@@(ColumnName)" = @(ColumnDBDefaultValue)\n\tWHERE "@@(TableName)"."@@(ColumnName)" IS @(ApplyToPreviousVersion(@(IfIsNotEnumType(NULL))@(IfIsEnumType(@(ColumnDBDefaultValue)))))})))\n, ",\r\n"})@(+)
GO\n\n})@(+)
@(IfAreColumnsRenamed{@(+)
@(RepeatOnRenamedColumns{UPDATE "@@(TableName)" SET "@@(TableName)"."@@(ColumnName)" = "@@(TableName)"."@(ApplyToPreviousVersion(@@(ColumnName)))"\n, "\r\n"})@(+)
GO\n\n})@(+)
@(IfAreColumnsToDrop{@(+)
@(RepeatOnDroppedColumns{ALTER TABLE "@@(TableName)"\n\tDROP COLUMN "@@(ColumnName)"\n, "\r\n"})@(+)
GO\n\n@(+)
})@(+)
@(IfPrimaryKeyDefined{@(IfIsPrimaryKeyToModify{@(+)
ALTER TABLE "@@(TableName)"\n@(+)
\tADD CONSTRAINT "@@(TablePrimaryKeyConstraintName)" PRIMARY KEY (\n@(+)
@(RepeatOnPrimaryKeySegments{\t\t"@@(ColumnName)", ",\r\n"})\n@(+)
\t)ON [PRIMARY]\n@(+)
GO\n\n@(+)
})})@(+)
@(IfAreForeignKeysToAdd{@(RepeatOnForeignKeysToAdd{@(+)
ALTER TABLE "@@(TableName)"\n@(+)
\tADD CONSTRAINT "@@(ConstraintName)" FOREIGN KEY (\n@(+)
@(RepeatOnForeignKeySegments{\t\t"@@(ColumnName)", ",\r\n"})\n@(+)
\t) REFERENCES "@@(ReferencedTableName)" (\n@(+)
\t\t@(RepeatOnForeignKeySegments{"@@(ReferencedColumnName)", ",\r\n"})\n@(+)
\t)\n@(+)
GO\n\n@(+)
})})
