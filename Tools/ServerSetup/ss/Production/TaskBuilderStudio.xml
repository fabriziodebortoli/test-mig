<?xml version="1.0" encoding="utf-8"?>
<SetupDefinition xmlns="http://schemas.microarea.it/setup"
                 configuration="release"
                 upgradeGuid="88939F0A-B44B-417B-BB02-9430F2F3DBB9"
                 producer="Microarea"
                 productName="TaskBuilder Studio"
                 setupOutputFileName="TaskBuilderStudio"
                 producerWebSite="http://www.microarea.it"
                 certificatePath="..\..\..\..\..\..\Applications\ERP\k.pfx"
                 certificatePassword="TaskBuilder.3"
                 mainAppFileName="TbAppManager.exe"
					       consoleAppFileName="AdministrationConsole.exe"
                 >
	<!--Consideriamo questo path come root di partenza: C:\Development\-->
  <FileSystemStructure virtualPath="[INSTANCENAME]">
    <IncludeFolder name ="Apps">
      <IncludeFolder name="Microarea Diagnostics" recursive="yes">
        <IncludeFile name="MADICO.msc">
          <ProgramsMenuShortcut name="Microarea Diagnostics"/>
        </IncludeFile>
      </IncludeFolder>
      <IncludeFolder name="Publish">
        <IncludeFolder name="*-*" featureName="[FOLDERNAME]" featureDescription="!(loc.LangPackFeature)">
          <IncludeFile name="*.pdb|*.dll|*.bin|*.config" />
          <ExcludeFile name="ERP*.bin"/>
        </IncludeFolder>
        <IncludeFolder name="locales">
          <IncludeFile name="*.pak" />
        </IncludeFolder>
        <IncludeFile name="TbAppManager.exe">
          <ProgramsMenuShortcut name="[PRODUCTNAME] Desktop"/>
        </IncludeFile>
        <IncludeFile name="AdministrationConsole.exe">
          <ProgramsMenuShortcut name="[PRODUCTNAME] Administration Console"/>
        </IncludeFile>
        <IncludeFile name="TbLoader.exe">
          <FirewallException name="Microarea [PRODUCTNAME] SOAP Server" />
        </IncludeFile>
        <IncludeFile name="*" />
        <ExcludeFile name="*.xml|*.payload|Accounting*.dll|Core*.dll|Inventory*.dll|Manufacturing*.dll|Sales*.dll|Microarea.ERP.*.*"/>
        <ExcludeFile name="Microarea.TaskBuilderNet.Test.dll"/>
      </IncludeFolder>
      <IncludeFolder name="Prerequisites" recursive="yes">
        <IncludeFile name="*" />
      </IncludeFolder>
      <IncludeFolder name="ClickOnceDeployer">
        <IncludeFolder name="*-*" featureName="[FOLDERNAME]" recursive="yes">
          <IncludeFile name="*" />
        </IncludeFolder>
        <IncludeFile name="*.exe|*.dll|*.config"/>
      </IncludeFolder>
      <IncludeFolder name="Images">
        <IncludeFile name="*" />
      </IncludeFolder>
      <IncludeFile name="*.application|*.vsto" />
    </IncludeFolder>
		<IncludeFolder name="Standard">
			<IncludeFolder name="Applications">
        <IncludeFolder name="TBF" featureName="TaskBuilder Framework" mandatory="yes">
          <IncludeFolder name="*" fragment="yes" recursive="yes">
            <IncludeFile name="*.config|*.Solution.xml|*.Brand.xml|*.csm|*.menu|*.ico|*.jpg|*.png|*.bin" />
          </IncludeFolder>
          <IncludeFile name="application.config" />
        </IncludeFolder>
        <IncludeFolder name="TBS">
          <IncludeFolder name="*" recursive="yes">
            <IncludeFile name="*.config|*.Solution.xml|*.Brand.xml|*.csm|*.menu|*.ico|*.jpg|*.png|*.bin" />
          </IncludeFolder>
          <IncludeFile name="application.config" />
        </IncludeFolder>
			</IncludeFolder>
      <IncludeFolder name="TaskBuilder">
        <IncludeFolder name="Extensions">
          <IncludeFolder name="*" fragment="yes">
            <IncludeFolder name="Menu|Files" recursive="yes">
              <IncludeFile name="*.gif|*.bmp|*.menu|*.png|*.ico"/>
            </IncludeFolder>
            <IncludeFolder name="OCR">
              <IncludeFolder name="en">
                <IncludeFile name="*eng.traineddata" />
              </IncludeFolder>
              <IncludeFolder name="bg-BG|de-CH|el-GR|es-CL|fr-FR|hr-HR|hu-HU|it-CH|it-IT|pl-PL|ro-RO|sl-SI|sr-Cyrl|sr-Latn|tr-TR|zh-CHS|zh-CHT" featureName="[FOLDERNAME]">
                <IncludeFile name="*.traineddata" />
              </IncludeFolder>
            </IncludeFolder>
            <IncludeFolder name="Dictionary">
              <IncludeFolder name="*" featureName="[FOLDERNAME]">
                <IncludeFile name="*.bin" />
              </IncludeFolder>
            </IncludeFolder>
            <IncludeFolder name="*" recursive="yes">
              <IncludeFile name ="*.xsl|*.xml|*.config|*.sql|*.menu|*.ini|*.wrm|*.template|*.tbjson|*.jbnd"/>
            </IncludeFolder>
            <IncludeFile name ="*.config"/>
          </IncludeFolder>
          <ExcludeFolder name="TbRowSecurity" />
          <IncludeFile name="*.config" />
        </IncludeFolder>
        <IncludeFolder name="Framework">
          <IncludeFolder name="*" fragment="yes">
            <IncludeFolder name="Dictionary">
              <IncludeFolder name="*" featureName="[FOLDERNAME]">
                <IncludeFile name="*.bin" />
              </IncludeFolder>
            </IncludeFolder>
            <IncludeFolder name="Menu|Files" recursive="yes">
              <IncludeFile name ="*.gif|*.bmp|*.menu|*.png|*.js|*.css|*.htm*|*.map|*.eot|*.svg|*.ttf|*.woff"/>
            </IncludeFolder>
            <IncludeFolder name="*" recursive="yes">
              <IncludeFile name ="*.xsl|*.xml|*.config|*.sql|*.menu|*.ini|*.wrm|*.tbjson|*.jbnd"/>
            </IncludeFolder>
            <IncludeFile name ="*.config"/>
          </IncludeFolder>
          <IncludeFolder name="Themes" recursive="yes">
            <IncludeFile name="*.theme|*.ttf|*.css" />
          </IncludeFolder>
          <ExcludeFolder name="tbutility|documentations|tbpchstub" />
          <IncludeFile name="*.config" />
        </IncludeFolder>
        <IncludeFolder name="AdministrationConsole">
          <IncludeFolder name="*" fragment="yes">
            <IncludeFolder name="Dictionary">
              <IncludeFolder name="*" featureName="[FOLDERNAME]">
                <IncludeFile name="*.bin" />
              </IncludeFolder>
            </IncludeFolder>
            <IncludeFolder name="*" recursive="yes">
              <IncludeFile name="*.xml|*.config|*.sql"/>
              <ExcludeFile name="AdvancedLevel.xml|BaseLevel.xml" />
            </IncludeFolder>
            <IncludeFile name ="*.config"/>
          </IncludeFolder>
          <ExcludeFolder name="HermesAdmin|RowSecurityToolKit" />
          <IncludeFile name="*.config" />
        </IncludeFolder>
        <IncludeFolder name="OtherComponents">
          <IncludeFolder name="WinFormsUI">
            <IncludeFile name="license.txt" />
          </IncludeFolder>
        </IncludeFolder>
        <IncludeFolder name="WebFramework">
          <!--<IncludeFolder name="EasyLook" virtualPath="[FOLDERNAME]" dedicatedAppPool="no" enable32bit="yes" createWebApplication="yes" fragment="yes">
            <IncludeFolder name="Bin">
              <IncludeFolder name="*" featureName="[FOLDERNAME]">
                <IncludeFile name="*.dll|*.config" />
              </IncludeFolder>
              <IncludeFile name ="*.dll|*.config"/>
            </IncludeFolder>
            <IncludeFolder name="Dictionary">
              <IncludeFolder name="*" featureName="[FOLDERNAME]">
                <IncludeFile name="*.bin" />
              </IncludeFolder>
            </IncludeFolder>
            <IncludeFolder name="Files" recursive="yes">
              <IncludeFile name="*" />
            </IncludeFolder>
            <IncludeFolder name="img" recursive="yes">
              <IncludeFile name="*" />
            </IncludeFolder>
            <IncludeFile name="*.asmx|*.asax|*.aspx|*.ascx|*.config|*.css" />
            <ExcludeFile name="*.debug.*|*.release.*" />
          </IncludeFolder>-->
          <IncludeFolder name="EasyAttachmentSync" virtualPath="[FOLDERNAME]" dedicatedAppPool="yes" enable32bit="yes" createWebApplication="yes" fragment="yes">
            <IncludeFolder name="Bin">
              <IncludeFolder name="*" featureName="[FOLDERNAME]">
                <IncludeFile name="*.dll|*.config" />
              </IncludeFolder>
              <IncludeFile name ="*.dll|*.config"/>
            </IncludeFolder>
            <IncludeFolder name="Dictionary">
              <IncludeFolder name="*" featureName="[FOLDERNAME]">
                <IncludeFile name="*.bin" />
              </IncludeFolder>
            </IncludeFolder>
            <IncludeFolder name="Files" recursive="yes">
              <IncludeFile name="*" />
            </IncludeFolder>
            <IncludeFolder name="img" recursive="yes">
              <IncludeFile name="*" />
            </IncludeFolder>
            <IncludeFile name="*.asmx|*.asax|*.aspx|*.ascx|*.config|*.css" />
            <ExcludeFile name="*.debug.*|*.release.*" />
          </IncludeFolder>
          <IncludeFolder name="*" virtualPath="[FOLDERNAME]" dedicatedAppPool="yes" enable32bit="no" fragment="yes" createWebApplication="yes">
            <IncludeFolder name="App_Data">
              <!--EULA non intestata localizzata-->
              <IncludeFolder name="*" featureName="[FOLDERNAME]">
                <IncludeFile name="*.pdf" />
              </IncludeFolder>
              <IncludeFile name="*.pdf" />
              <!--EULA non intestata inglese-->
            </IncludeFolder>
            <IncludeFolder name="Bin">
              <IncludeFolder name="*" featureName="[FOLDERNAME]">
                <IncludeFile name="*.dll|*.config" />
              </IncludeFolder>
              <IncludeFile name ="*.dll|*.config"/>
            </IncludeFolder>
            <IncludeFolder name="Dictionary">
              <IncludeFolder name="*" featureName="[FOLDERNAME]">
                <IncludeFile name="*.bin" />
              </IncludeFolder>
            </IncludeFolder>
            <IncludeFolder name="Files" recursive="yes">
              <IncludeFile name="*" />
            </IncludeFolder>
            <IncludeFolder name="img" recursive="yes">
              <IncludeFile name="*" />
            </IncludeFolder>
            <IncludeFolder name="Styles" recursive="yes">
              <IncludeFile name="*.css" />
            </IncludeFolder>
            <IncludeFolder name="Services" recursive="yes">
              <IncludeFile name="*.ashx" />
            </IncludeFolder>
            <IncludeFolder name="Scripts" recursive="yes">
              <IncludeFile name="*.js" />
            </IncludeFolder>
            <IncludeFile name="*.asmx|*.asax|*.aspx|*.ascx|*.config|*.css" />
            <ExcludeFile name="*.debug.*|*.release.*" />
          </IncludeFolder>
          <IncludeFolder name="M4Client|M4Server" virtualPath="[FOLDERNAME]" dedicatedAppPool="yes" enable32bit="no" fragment="yes" createWebApplication="yes" recursive="yes">
            <IncludeFile name="*" />
          </IncludeFolder>
          <ExcludeFolder name="TBTalkieManager|EasyLookSetup|TBLoaderLauncher|RESTGate|TbHermes|EasyLook" />
          <IncludeFile name="*.config" />
        </IncludeFolder>
      </IncludeFolder>
		</IncludeFolder>
	</FileSystemStructure>
  <EventLogStructure>
    <EventLog log="MA Server" name="TbSender" />
    <EventLog log="MA Server" name="LoginManager" />
    <EventLog log="MA Server" name="EasyAttachmentSync" />
    <EventLog log="MA Server" name="ActivationObject" />
    <EventLog log="MA Server" name="LockManager" />
    <EventLog log="MA Server" name="TbServices" />
    <EventLog log="MA Server" name="FsProvider" />
    <EventLog log="MA Server" name="ActivationManager" />
    <EventLog log="MA Server" name="NameSolver" />
    <EventLog log="MA Server" name="SchedulerAgent" />
    <EventLog log="MA Server" name="NotificationService" />
  </EventLogStructure>
  <InternetShortcutStructure>
    <InternetShortcut name="TaskBuilder Studio Desktop Client Setup" target="http://[ComputerName]:[DEFAULTWEBSITEPORT]/[INSTANCENAME]/Index.htm" desktop="no" pfiles="yes" />
  </InternetShortcutStructure>
  <MergeModulesDeny>
    <MergeModule name="Microsoft_VC120_CRT_x64.msm" />
    <MergeModule name="Microsoft_VC120_MFC_x64.msm" />
    <MergeModule name="Microsoft_VC140_CRT_x64.msm" />
    <MergeModule name="Microsoft_VC140_MFC_x64.msm" />
  </MergeModulesDeny>
</SetupDefinition>
